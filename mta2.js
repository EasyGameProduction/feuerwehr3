var fragen = [[// Frage 1
               "Ihr Trupp erhält den Auftrag, für den Angriffstrupp eine Schlauchleitung zum Vorgehen in ein Gebäude vorzubereiten. Einsatzziel ist eine Wohnung im 2. Obergeschoss. Wie viel Schlauchreserve ordnen sie als Truppführer an?",
               // Antwort 1
               "4 C-Schläuche (1 C-Länge zum Gebäude, 1 C-Länge für jedes Geschoss, 1 C-Länge je Nutzungseinheit",
               // Antwort 2
               "5 C-Schläuche (2 C-Länge zum Gebäude, 1 C-Länge für jedes Geschoss, 1 C-Länge je Nutzungseinheit",
               // Antwort 3
               "6 C-Schläuche (2 C-Länge zum Gebäude, 1 C-Länge für jedes Geschoss, 2 C-Länge je Nutzungseinheit",
               // Antwort 4
               "1 C-Schlauch",
               [true,false,false,false],
               // Bild
               ""],

               [// Frage 2
               "Im Rahmen einer Bewegungsfahrt kommen Sie an einem Verkehrsunfall vorbei. Ordnen Sie die Begriffe zum Umgang mit Verletzten bei Verkehrsunfällen in der richtigen Reihenfolge: <br>1 - Unfallstelle absichern <br>2 - Nachalarmierung veranlassen <br>3 - Zündquellen fernhalten (Handy, Feuerzeug) <br>4 - Verletzte betreuen",
               // Antwort 1
               "1-2-3-4",
               // Antwort 2
               "1-4-3-2",
               // Antwort 3
               "4-3-2-1",
               // Antwort 4
               "2-1-3-4",
               [true,false,false,false],
               // Bild
               ""],

               [// Frage 3
               "Was müssen Sie bei einem Stromunfall im Niederspannungsbereich (Spannung 230 bis 400 Volt) zuerst tun? Ordnen Sie die Begriffe in der richtigen Reihenfolge! <br>1 - Den Verunfallten von einem gut isolierten Standort aus wegziehen <br>2 - Die Stromleitung spannungsfrei schalten (lassen) <br>3 - Rettungsdienst über den Einheitsführer alarmieren <br> 4 - Erste Hilfe - Maßnahmen durchführen",
               // Antwort 1
               "2-1-3-4",
               // Antwort 2
               "1-2-3-4",
               // Antwort 3
               "4-3-2-1",
               // Antwort 4
               "2-4-3-1",
               [true,false,false,false],
               // Bild
               ""],

               [// Frage 4
               "Welche Aussagen über Kohlenmonoxid sind richtig?",
               // Antwort 1
               "entsteht bei unvollkommener Verbrennung",
               // Antwort 2
               "brennbar",
               // Antwort 3
               "leichter als Luft",
               // Antwort 4
               "giftig (Blut- und Nervengift)",
               [true,true,true,true],
               // Bild
               ""],

               [// Frage 5
               "Welche Aussagen über Kohlenmonoxid sind richtig?",
               // Antwort 1
               "schwerer als Luft",
               // Antwort 2
               "farb-, geruch- und geschmacklos",
               // Antwort 3
               "ungifig",
               // Antwort 4
               "entsteht bei vollkommener Verbrennung",
               [false,true,false,false],
               // Bild
               ""],

               [// Frage 6
               "Während des Löschangriffs (Außenangriff) entdecken Sie eine leblose Person. Welchen der folgenden Schritte führen Sie zusammen mit ihrem Truppmann im Rahmen der Patientenkontrolle aus Sicht der Ersten Hilfe vorrangig durch?",
               // Antwort 1
               "Zuerst Bewusstsein, dann Atmung kontrollieren",
               // Antwort 2
               "Beine und Arme hochlagern",
               // Antwort 3
               "Zuerst Blutung stillen, dann Atmung kontrollieren",
               // Antwort 4
               "Zuerst Feuer löschen, dann Verletzten betreuen",
               [true,false,false,false],
               // Bild
               ""],

               [// Frage 7
               "Welche Aussagen über Kohlendioxid sind zutreffend?",
               // Antwort 1
               "entsteht bei unvollkommener Verbrennung",
               // Antwort 2
               "brennbar",
               // Antwort 3
               "leichter als Luft",
               // Antwort 4
               "steuert die Atmung, ist bei zu hoher Konzentration giftig",
               [false,false,false,true],
               // Bild
               ""],

               [// Frage 8
               "Welche Aussagen über Kohlendioxid sind zutreffend?",
               // Antwort 1
               "schwerer als Luft",
               // Antwort 2
               "farb-, geruch- und geschmacklos",
               // Antwort 3
               "ungifig",
               // Antwort 4
               "entsteht bei vollkommener Verbrennung",
               [true,true,false,true],
               // Bild
               ""],

               [// Frage 9
               "Welche Gefahren entstehen in dieser Situation?",
               // Antwort 1
               "Ausrutschen",
               // Antwort 2
               "Stolpern",
               // Antwort 3
               "Quetschen",
               // Antwort 4
               "Stürzen",
               [true,true,true,true],
               // Bild
               "Bild1.png"],

               [// Frage 10
               "Kreuzen Sie die zur GAMS-Regel gehörenden Begriffe an",
               // Antwort 1
               "Motoren warten",
               // Antwort 2
               "Absperren, absichern",
               // Antwort 3
               "Alarmieren",
               // Antwort 4
               "Grundsätze erklären",
               [false,true,false,false],
               // Bild
               ""],

               [// Frage 11
               "Kreuzen Sie die zur GAMS-Regel gehörenden Begriffe an",
               // Antwort 1
               "Spezialkräfte anfordern",
               // Antwort 2
               "Spitzenkräfte anfordern",
               // Antwort 3
               "Gefahr erkennen",
               // Antwort 4
               "Menschenrettung",
               [true,false,true,true],
               // Bild
               ""],

               [// Frage 12
               "Sie erhalten als Truppführer den Auftrag, eine Saugleitung aufzubauen. Warum soll in fließenden Gewassern der Saugkorb im Regelfall gegen die Fließrichtung des Wassers liegen? Kreuzen Sie die richtigen Antworten an.",
               // Antwort 1
               "In dieser Stellung wird die Bildung eines Wasserstrudels (Luftsogs) und damit Ansaugschwierigkeiten vermieden",
               // Antwort 2
               "Damit die Pumpe besser ansaugt, weil das Wasser in den Saugkorb gedrückt wird",
               // Antwort 3
               "Die Saugleitung kann in dieser Stellung besser gehalten werden",
               // Antwort 4
               "Damit der Schmutz am Saugkorb leichter weggespült wird",
               [true,true,false,false],
               // Bild
               ""],

               [// Frage 13
               "Worauf achten Sie bei der Entnahme von Geräten aus den Fahrzeug-Geräteräumen?",
               // Antwort 1
               "Dass die Geräteschlitten zur schnelleren Wiederbeladung im ausgezogenen Zustand belassen werden",
               // Antwort 2
               "Dass schwere Geräte von mehreren Einsatzkräften getragen werden",
               // Antwort 3
               "Dass die Aufstiegshilfen (Haltegriffe, Trittbretter, Leitern usw.) benutzt werden",
               // Antwort 4
               "Auf Verletzungsgefahren",
               [false,true,true,true],
               // Bild
               ""],

               [// Frage 14
               "Welche der folgenden Feuerlöscher können bei Bränden fester Stoffe wirkungsvoll eingesetzt werden?",
               // Antwort 1
               "Kohlendioxidlöscher",
               // Antwort 2
               "Feuerlöscher mit Metallbrandpulver",
               // Antwort 3
               "Pulverlöscher mit Glutbrandpulver",
               // Antwort 4
               "Pulverlöscher mit Flammbrandpulver",
               [false,false,true,false],
               // Bild
               ""],

               [// Frage 15
               "Welche der folgenden Feuerlöscher können bei Bränden fester Stoffe wirkungsvoll eingesetzt werden?",
               // Antwort 1
               "Pulverlöscher mit Flammbrandpulver",
               // Antwort 2
               "Nasslöscher",
               // Antwort 3
               "Schaumlöscher",
               // Antwort 4
               "Pulverlöscher mit Glutbrandpulver",
               [false,true,true,true],
               // Bild
               ""],

               [// Frage 16
               "Welche der folgenden Feuerlöscher können bei Bränden flüssiger Stoffe wirkungsvoll eingesetzt werden?",
               // Antwort 1
               "Kohlendioxidlöscher",
               // Antwort 2
               "Feuerloscher mit Metallbrandpulver",
               // Antwort 3
               "Pulverlöscher mit ABC-Pulver",
               // Antwort 4
               "Nasslöscher",
               [true,false,true,false],
               // Bild
               ""],

               [// Frage 17
               "Welche der folgenden Feuerlöscher können bei Bränden flüssiger Stoffe wirkungsvoll eingesetzt werden?",
               // Antwort 1
               "Pulverlöscher mit BC-Brandpulver",
               // Antwort 2
               "Nasslöscher",
               // Antwort 3
               "Schaumlöscher",
               // Antwort 4
               "Kolendioxidlöscher",
               [true,false,true,true],
               // Bild
               ""],

               [// Frage 18
               "Was beachten Sie als Truppführer bei der Brandbekampfung?",
               // Antwort 1
               "Keinesfalls ein Gebäude betreten",
               // Antwort 2
               "Sicherheitsabstände zu elektrischen Anlagen einhalten",
               // Antwort 3
               "Wasserabgabe immer wieder stoppen, damit der Wasserdampf abziehen kann und die Entwicklung der Löscharbeiten kontrolliert werden kann",
               // Antwort 4
               "Ausreichende Schlauchreserve",
               [false,true,true,true],
               // Bild
               ""],

               [// Frage 19
               "Was beachten Sie als Truppführer bei der Brandbekampfung?",
               // Antwort 1
               "Auf eine doppelte Rückwegsicherung mit Schlauch und Feuerwehrleine beim Innenangriff",
               // Antwort 2
               "Die Position immer wieder wechseln, um den Brand von allen Seiten bekämpfen zu können",
               // Antwort 3
               "Gegen den Wind angreifen",
               // Antwort 4
               "",
               [false,true,false,false],
               // Bild
               ""],

               [// Frage 20
               "Sie bekommen den Auftrag eine Fahrzeugbatterie abzuklemmen. Welchen Pol klemmen Sie zuerst ab?",
               // Antwort 1
               "Den Minuspol",
               // Antwort 2
               "Den Pluspol",
               // Antwort 3
               "Bei modernen Fahrzeugen ist die Reihenfolge egal",
               // Antwort 4
               "Darf von der Feuerwehr nicht abgeklemmt werden",
               [true,false,false,false],
               // Bild
               ""],

               [// Frage 21
               "Bei einem Unfall laufen Betriebsstoffe aus. Womit können Sie kleinere Mengen ausgelaufenen Treibstoffs abdecken?",
               // Antwort 1
               "Wasser",
               // Antwort 2
               "Ölbindemittel",
               // Antwort 3
               "Erde",
               // Antwort 4
               "Sagespäne",
               [false,true,true,true],
               // Bild
               ""],

               [// Frage 22
               "Worauf ist beim Aufstellen einer Steckleiter zu achten?",
               // Antwort 1
               "Auf eine sichere Verriegelung der Sperrbolzen",
               // Antwort 2
               "Dass die Leiter nicht vor Fluchtwegen/Eingangstüren in Stellung gebracht wird",
               // Antwort 3
               "Dass immer alle 4 Leiterteile genutzt werden",
               // Antwort 4
               "Dass 3 Sprossen bzw. 1 m Überstand eingehalten werden, wenn keine andere Möglichkeit zum Festhalten besteht",
               [true,true,false,true],
               // Bild
               ""],

               [// Frage 23
               "Worauf ist beim Aufstellen einer Steckleiter zu achten?",
               // Antwort 1
               "Dass die Leiter bis zur Fensteroberkante reicht",
               // Antwort 2
               "Dass ein ausreichender Abstand zu spannungsführenden Teilen eingehalten wird",
               // Antwort 3
               "Dass der Untergrund waagrecht und tragfähig ist",
               // Antwort 4
               "Dass ein Anstellwinkel von ca. 85° eingehalten wird",
               [false,true,true,false],
               // Bild
               ""],

               [// Frage 24
               "Welche taktischen Einsatzgrundsätze beachten Sie als Truppführer?",
               // Antwort 1
               "Menschenrettung hat oberste Priorität",
               // Antwort 2
               "Erkannte Gefahren sofort melden",
               // Antwort 3
               "Truppweise geschlossen vorgehen",
               // Antwort 4
               "Rückzugsweg sichern",
               [true,true,true,true],
               // Bild
               ""],

               [// Frage 25
               "Welche taktischen Einsatzgrundsätze beachten Sie als Truppführer?",
               // Antwort 1
               "Spätestens ab der Rauchgrenze mit Wasser am Rohr vorgehen",
               // Antwort 2
               "Schaden so gering wie möglich halten",
               // Antwort 3
               "Immer kriechend vorgehen",
               // Antwort 4
               "Löschstrahl nicht unterbrechen",
               [true,true,false,false],
               // Bild
               ""],

               [// Frage 26
               "Der Wassertrupp bekommt den Auftrag, ein Gebäude (rauchfrei) nach Personen zu durchsuchen. Wer legt die Reihenfolge der Absuche fest, wenn im Befehl des Gruppenführers kein Hinweis gegeben wurde?",
               // Antwort 1
               "Der dienstälteste Feuerwehrmann im Trupp",
               // Antwort 2
               "Der Truppführer",
               // Antwort 3
               "Der Truppmann",
               // Antwort 4
               "Der Maschinist",
               [false,true,false,false],
               // Bild
               ""],

               [// Frage 27
               "Der Einheitsführer befiehlt, dass Sie mit lhrem Trupp den nächsten Hydranten als Wasserversorgung einsatzbereit machen sollen. In etwa 25 m Entfernung zur Einsatzstelle entdecken Sie einen Unterflurhydranten, auf dem das im Bild dargestellte Fahrzeug parkt. In 100 m Entfernung sehen Sie einen Überflurhydranten <br> - wie entscheiden Sie sich?",
               // Antwort 1
               "Wir rutschen das Fahrzeug zur Seite und machen den Unterflurhydranten einsatzbereit. Als Feuerwehrmann darf ich Sachen, die den Einsatz behindern, entfernen",
               // Antwort 2
               "Weil bei allen Einsatzmaßnahmen die Verhältnismäßigkeit zu beachten ist, entscheide ich mich für den Überflurhydranten, auch wenn es etwas länger dauert",
               // Antwort 3
               "Ich weise die Polizei an, den Fahrzeughalter ausfindig zu machen und das Entfernen des Fahrzeuges zu veranlassen",
               // Antwort 4
               "",
               [false,true,false,false],
               // Bild
               "Bild3.png"],

               [// Frage 28
               "Beim Überqueren von Straßen mit Schlauchleitungen sind mindestens drei Schlauchbrücken auf einer Fahrbahnseite so auszulegen, dass Fahrzeuge verschiedener Spurbreite (PKW/LKW) die Schlauchleitung überfahren können. Der Truppführer achtet darauf, dass die Schlauchbrücken fachgerecht verlegt werden. Wie groß wählen sie den Abstand?",
               // Antwort 1
               "Etwa 2,5 m",
               // Antwort 2
               "Etwa 1,0 m",
               // Antwort 3
               "Etwa 1,5 m",
               // Antwort 4
               "Etwa 3,0 m",
               [false,true,false,false],
               // Bild
               "Bild2.png"],

               [// Frage 29
               "Der Truppführer ist für die genaue Lage des Verteilers verantwortlich. Wo sollten Sie nach Möglichkeit den Verteiler nicht ablegen?",
               // Antwort 1
               "Im Trümmerschatten",
               // Antwort 2
               "Im Schließbereich der Haustür",
               // Antwort 3
               "Außerhalb des Fluchtwegs",
               // Antwort 4
               "",
               [true,true,false,false],
               // Bild
               ""],

               [// Frage 30
               "Als Truppführer sind Sie für die Sicherheit des Trupps verantwortlich. Welche Grundsätze beachten Sie dabei beim Auftreten atomarer Gefahren?",
               // Antwort 1
               "Abstand halten",
               // Antwort 2
               "Abschirmungen nutzen",
               // Antwort 3
               "Aufenthaltsdauer begrenzen",
               // Antwort 4
               "Inkorporation ausschließen",
               [true,true,true,true],               
               // Bild
               ""],
            ];

var index = 0;
var fehler = 0;

function startGame(){
    index = 0;
    fehler = 0;
    fragen = this.shuffle(fragen);
    document.getElementById("Aufgabe").innerHTML = "Aufgabe: 1" + "/" + fragen.length.toString();
    setFields();
}
this.startGame();

function setFields(){
    document.getElementById("Antwort1").style.backgroundColor = "white";
    document.getElementById("Antwort2").style.backgroundColor = "white";
    document.getElementById("Antwort3").style.backgroundColor = "white";
    document.getElementById("Antwort4").style.backgroundColor = "white";
    document.getElementById("buttonWeiter").hidden = true;
    document.getElementById("buttonAbschicken").hidden = false;
    document.getElementById("Frage").innerHTML = fragen[index][0];
    document.getElementById("checkbox1Label").innerHTML = fragen[index][1];
    document.getElementById("checkbox2Label").innerHTML = fragen[index][2];
    document.getElementById("checkbox3Label").innerHTML = fragen[index][3];
    if(fragen[index][4] != ""){
        document.getElementById("checkbox4").hidden = false;
        document.getElementById("checkbox4Label").hidden = false;
        document.getElementById("checkbox4Label").innerHTML = fragen[index][4];
    } else{
        document.getElementById("checkbox4").hidden = true;
        document.getElementById("checkbox4Label").hidden = true;
    }
    if(fragen[index][6] != ""){
      document.getElementById("Bild").hidden = false;
      document.getElementById("Bild").src = fragen[index][6];
    }else{
      document.getElementById("Bild").hidden = true;
    }
}

function checkAnswer(){
    var falsch = false;
    for(let i = 0; i < 4; i++){
        if(document.getElementById("checkbox" + (+i + 1).toString()).checked ==  fragen[index][5][i]){
            document.getElementById("Antwort" + (+i + 1).toString()).style.backgroundColor = "green";
        } else{
            falsch = true;
            document.getElementById("Antwort" + (+i + 1).toString()).style.backgroundColor = "red";
        }
    }
    if(falsch){
        fehler++;
    }
    document.getElementById("buttonWeiter").hidden = false;
    document.getElementById("buttonAbschicken").hidden = true;
}

function next(){
    if(index < fragen.length -1){
        index++;
        document.getElementById("checkbox1").checked = false;
        document.getElementById("checkbox2").checked = false;
        document.getElementById("checkbox3").checked = false;
        document.getElementById("checkbox4").checked = false;
        document.getElementById("Aufgabe").innerHTML = "Aufgabe: " + (+index + +1).toString() + "/" + fragen.length.toString();
        setFields();
    } else{
        if(fehler == 0){
            Swal.fire({
                title: 'Fehlerfrei',
                text: 'Du hast alle ' + fragen.length.toString() + ' richtig beantwortet.',
                icon: 'success',
                timerProgressBar: true,
                timer: 4000,
                didOpen: () => {Swal.showLoading()
                const b = Swal.getHtmlContainer().querySelector('b')
                timerInterval = setInterval(() => {
                  b.textContent = Swal.getTimerLeft()
                }, 100)
              },
              willClose: () => {
                clearInterval(timerInterval)
              }
            }).then((result) => {
              /* Read more about handling dismissals below */
              if (result.dismiss === Swal.DismissReason.timer) {
                console.log('I was closed by the timer')
              }
            })
        } else if(fehler <= 2){
            Swal.fire({
                title: 'Naja',
                text: 'Du hast ' + (+fragen.length - +fehler).toString() + ' von ' + fragen.length.toString() + ' richtig beantwortet.',
                icon: 'warning',
                timerProgressBar: true,
                timer: 4000,
                didOpen: () => {Swal.showLoading()
                const b = Swal.getHtmlContainer().querySelector('b')
                timerInterval = setInterval(() => {
                  b.textContent = Swal.getTimerLeft()
                }, 100)
              },
              willClose: () => {
                clearInterval(timerInterval)
              }
            }).then((result) => {
              /* Read more about handling dismissals below */
              if (result.dismiss === Swal.DismissReason.timer) {
                console.log('I was closed by the timer')
              }
            })
        } else if(fehler >= 3){
            Swal.fire({
                title: 'Übungsbedarf',
                text: 'Du hast nur ' + (+fragen.length - +fehler).toString() + ' von ' + fragen.length.toString() + ' richtig beantwortet.',
                icon: 'error',
                timerProgressBar: true,
                timer: 4000,
                didOpen: () => {Swal.showLoading()
                const b = Swal.getHtmlContainer().querySelector('b')
                timerInterval = setInterval(() => {
                  b.textContent = Swal.getTimerLeft()
                }, 100)
              },
              willClose: () => {
                clearInterval(timerInterval)
              }
            }).then((result) => {
              /* Read more about handling dismissals below */
              if (result.dismiss === Swal.DismissReason.timer) {
                console.log('I was closed by the timer')
              }
            })
        }
        this.startGame();
    }
}

function shuffle(array) {
    let counter = array.length;

    // While there are elements in the array
    while (counter > 0) {
        // Pick a random index
        let index = Math.floor(Math.random() * counter);

        // Decrease counter by 1
        counter--;

        // And swap the last element with it
        let temp = array[counter];
        array[counter] = array[index];
        array[index] = temp;
    }

    return array;
}

